# 分布式事务

## 概述

本lab演示了分布式系统中的事务处理机制：
- 两阶段提交（Two-Phase Commit, 2PC）
- Saga模式

## 对应DDIA章节

- 第9章：一致性与共识
- 第9.1节：原子提交
- 第9.2节：两阶段提交

## 分布式事务模式

### 两阶段提交（2PC）
- **特点**: 协调者协调多个参与者，分准备和提交两个阶段
- **优势**: 保证原子性
- **劣势**: 阻塞性，协调者单点故障

### Saga模式
- **特点**: 长事务分解为多个本地事务，通过补偿操作回滚
- **优势**: 非阻塞，适合长事务
- **劣势**: 需要实现补偿逻辑，最终一致性

## 运行方式

```bash
# 运行两阶段提交示例
cd two-phase-commit
go run main.go

# 运行Saga模式示例
cd saga
go run main.go
```

## 关键权衡

- **一致性 vs 性能**: 强一致性（2PC）性能较低，最终一致性（Saga）性能较高
- **阻塞 vs 非阻塞**: 2PC是阻塞的，Saga是非阻塞的
- **复杂度**: 2PC实现相对简单，Saga需要设计补偿逻辑

