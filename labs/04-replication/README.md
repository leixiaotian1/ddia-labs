# 数据复制

## 概述

本lab演示了三种主要的数据复制模式：
- 主从复制（Master-Slave / Leader-Follower）
- 多主复制（Multi-Master）
- 无主复制（Leaderless，Dynamo风格）

## 对应DDIA章节

- 第5章：复制
- 第5.1节：主从复制
- 第5.2节：复制延迟问题
- 第5.3节：多主复制
- 第5.4节：无主复制

## 复制模式对比

### 主从复制
- **特点**: 单一主节点，多个从节点
- **优势**: 简单，一致性相对容易保证
- **劣势**: 主节点单点故障，复制延迟

### 多主复制
- **特点**: 多个主节点，都可以接受写入
- **优势**: 高可用，写入性能好
- **劣势**: 冲突解决复杂，一致性较弱

### 无主复制
- **特点**: 无固定主节点，客户端直接写入多个节点
- **优势**: 高可用，无单点故障
- **劣势**: 需要读修复和反熵，一致性模型复杂

## 运行方式

```bash
# 运行主从复制示例
cd master-slave
go run main.go

# 运行多主复制示例
cd multi-master
go run main.go

# 运行无主复制示例
cd leaderless
go run main.go
```

## 关键权衡

- **一致性 vs 可用性**: 强一致性通常需要牺牲可用性
- **延迟 vs 一致性**: 同步复制延迟高但一致性强，异步复制延迟低但可能不一致
- **冲突处理**: 多主和无主复制需要处理写入冲突

